host: codon-slurm-login-04.ebi.ac.uk
Building DAG of jobs...
SLURM run ID: d93c408d-48f1-494d-b155-ce916cc7c449
MinJobAge 120s (>= 120s). 'squeue' should work reliably for status queries.
Using shell: /bin/bash
Provided remote nodes: 200
Conda environments: ignored
Job stats:
job                         count
------------------------  -------
all                             1
ggcaller_all                    1
list_panaroo_graphs             1
merge_pangenomes                1
panaroo_all                     1
poppunk_assign_all              1
poppunk_to_cluster_lists        1
split_assemblies_tsv            1
total                           8

Select jobs to execute...
Execute 1 jobs...
Cleaning up SLURM log files older than 10 day(s).
RuleException in rule split_assemblies_tsv in file "/hps/software/users/jlees/jacqueline/pangenome_merge/snakemake/Snakefile", line 24:
NameError: The name 'bn#assemblies_batch_' is unknown in this context. Please make sure that you defined that variable. Also note that braces not used for variable access have to be escaped by repeating them, i.e. {{print $1}}, when formatting the following:

        mkdir -p {output.outdir}

        in="{input.tsv}"
        outdir="{output.outdir}"
        max="{params.max_isolates}"

        # split into blocks of samples
        split -l "{params.max_isolates}" "{input.tsv}" "{output.outdir}"/assemblies_batch_
        
        # rename to assemblies_batch_000.tsv, assemblies_batch_001.tsv, etc.
        n=0
        for f in {output.outdir}/assemblies_batch_*; do
            mv "$f" {output.outdir}/assemblies_batch_$(printf "%03d.tsv" $n)
            n=$((n+1))
        done

        # create and test index
        for f in {output.outdir}/assemblies_batch_*.tsv; do
            bn=$(basename "$f")                # assemblies_batch_000.tsv
            id=${bn#assemblies_batch_}         # 000.tsv
            id=${id%.tsv}                      # 000
            echo "$id"
        done > "{output.index}"

        test -s "{output.index}"

        
