host: codon-slurm-login-04.ebi.ac.uk
Building DAG of jobs...
SLURM run ID: 18e4e84a-9430-42a6-91fa-2bca57c0a98a
MinJobAge 120s (>= 120s). 'squeue' should work reliably for status queries.
Using shell: /bin/bash
Provided remote nodes: 200
Conda environments: ignored
Job stats:
job                         count
------------------------  -------
all                             1
ggcaller_all                    1
list_panaroo_graphs             1
merge_pangenomes                1
panaroo_all                     1
poppunk_assign_all              1
poppunk_to_cluster_lists        1
split_assemblies_tsv            1
total                           8

Select jobs to execute...
Execute 1 jobs...
[Wed Feb 11 13:25:55 2026]
checkpoint split_assemblies_tsv:
    input: /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/test_data/assemblies.tsv
    output: /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches, /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/batches.index
    jobid: 7
    reason: Missing output files: /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches
    resources: tmpdir=<TBD>, disk_mb=1000, disk=1 GB, disk_mib=954, mem_mb=1000, mem=1 GB, mem_mib=954, slurm_account=jlees
DAG of jobs will be updated after completion.
No wall time information given. This might or might not work on your cluster. If not, specify the resource runtime in your rule or as a reasonable default via --default-resources.
[Wed Feb 11 13:25:55 2026]
Error in rule split_assemblies_tsv:
    message: SLURM sbatch failed. The error message was 'sbatch: error: slurm_job_submit: [user 10665 / lilyjacqueline]: You must specify a time limit for your job. Please use '-t' or '--time'
sbatch: error: Batch job submission failed: Requested time limit is invalid (missing or exceeds some limit)'.
    sbatch call:
        sbatch --parsable --job-name 18e4e84a-9430-42a6-91fa-2bca57c0a98a --output /hps/software/users/jlees/jacqueline/pangenome_merge/snakemake/.snakemake/slurm_logs/rule_split_assemblies_tsv/%j.log --export=ALL --comment rule_split_assemblies_tsv  -A jlees  -p standard --mem 1000 --ntasks=1 --cpus-per-task=1 -D /hps/software/users/jlees/jacqueline/pangenome_merge/snakemake --wrap="/homes/lilyjacqueline/micromamba/envs/snakemake/bin/python3.13 -m snakemake --snakefile '/hps/software/users/jlees/jacqueline/pangenome_merge/snakemake/Snakefile' --target-jobs 'split_assemblies_tsv:' --allowed-rules split_assemblies_tsv --cores 'all' --attempt 1 --force-use-threads  --wait-for-files '/hps/software/users/jlees/jacqueline/pangenome_merge/snakemake/.snakemake/tmp.t46bkwck' '/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/test_data/assemblies.tsv' --force --target-files-omit-workdir-adjustment --max-inventory-time 0 --retries 0 --nocolor --no-hooks --nolock --ignore-incomplete --rerun-triggers software-env code mtime params input --conda-frontend 'conda' --shared-fs-usage source-cache input-output persistence sources software-deployment storage-local-copies --wrapper-prefix 'https://github.com/snakemake/snakemake-wrappers/raw/' --latency-wait 5 --scheduler 'ilp' --local-storage-prefix base64//LnNuYWtlbWFrZS9zdG9yYWdl --scheduler-solver-path '/homes/lilyjacqueline/micromamba/envs/snakemake/bin' --runtime-source-cache-path '/homes/lilyjacqueline/.cache/snakemake/snakemake/source-cache/snakemake-runtime-cache/tmp53ln5f0g' --default-resources base64//dG1wZGlyPXN5c3RlbV90bXBkaXI= base64//c2x1cm1fYWNjb3VudD1qbGVlcw== --executor slurm-jobstep --jobs 1 --mode 'remote'"
For further error details see the cluster/cloud log and the log files of the involved rule(s).
    jobid: 7
    input: /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/test_data/assemblies.tsv
    output: /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches, /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/batches.index
    shell:
        
        mkdir -p /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches

        in="/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/test_data/assemblies.tsv"
        outdir="/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches"
        max="10000"

        # split into blocks of samples
        split -l "10000" "/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/test_data/assemblies.tsv" "/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches"/assemblies_batch_
        
        # rename to assemblies_batch_000.tsv, assemblies_batch_001.tsv, etc.
        n=0
        for f in /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/assemblies_batch_*; do
            mv "$f" /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/assemblies_batch_$(printf "%03d.tsv" $n)
            n=$((n+1))
        done

        # create and test index
        for f in /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/assemblies_batch_*.tsv; do
            bn=$(basename "$f")                 # assemblies_batch_000.tsv
            id=${bn#assemblies_batch_}        # 000.tsv
            id=${id%.tsv}                     # 000
            echo "$id"
        done > "/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/batches.index"

        test -s "/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/batches.index"

        
        (command exited with non-zero exit code)
Shutting down, this might take some time.
Cleaning up SLURM log files older than 10 day(s).
Exiting because a job execution failed. Look below for error messages
[Wed Feb 11 13:26:35 2026]
Error in rule split_assemblies_tsv:
    message: None
    jobid: 7
    input: /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/test_data/assemblies.tsv
    output: /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches, /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/batches.index
    shell:
        
        mkdir -p /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches

        in="/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/test_data/assemblies.tsv"
        outdir="/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches"
        max="10000"

        # split into blocks of samples
        split -l "10000" "/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/test_data/assemblies.tsv" "/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches"/assemblies_batch_
        
        # rename to assemblies_batch_000.tsv, assemblies_batch_001.tsv, etc.
        n=0
        for f in /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/assemblies_batch_*; do
            mv "$f" /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/assemblies_batch_$(printf "%03d.tsv" $n)
            n=$((n+1))
        done

        # create and test index
        for f in /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/assemblies_batch_*.tsv; do
            bn=$(basename "$f")                 # assemblies_batch_000.tsv
            id=${bn#assemblies_batch_}        # 000.tsv
            id=${id%.tsv}                     # 000
            echo "$id"
        done > "/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/batches.index"

        test -s "/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/batches.index"

        
        (command exited with non-zero exit code)
Complete log(s): /hps/software/users/jlees/jacqueline/pangenome_merge/snakemake/.snakemake/log/2026-02-11T132554.922674.snakemake.log
WorkflowError:
At least one job did not complete successfully.
