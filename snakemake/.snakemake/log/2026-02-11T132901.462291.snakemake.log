host: codon-slurm-login-04.ebi.ac.uk
Building DAG of jobs...
SLURM run ID: b029611b-b87d-4d23-97a3-3c2c5a7813dd
MinJobAge 120s (>= 120s). 'squeue' should work reliably for status queries.
Using shell: /bin/bash
Provided remote nodes: 200
Conda environments: ignored
Job stats:
job                         count
------------------------  -------
all                             1
ggcaller_all                    1
list_panaroo_graphs             1
merge_pangenomes                1
panaroo_all                     1
poppunk_assign_all              1
poppunk_to_cluster_lists        1
split_assemblies_tsv            1
total                           8

Select jobs to execute...
Execute 1 jobs...
[Wed Feb 11 13:29:01 2026]
checkpoint split_assemblies_tsv:
    input: /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/test_data/assemblies.tsv
    output: /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches, /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/batches.index
    jobid: 7
    reason: Missing output files: /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches
    resources: tmpdir=<TBD>, mem_mb=150000, mem=150 GB, mem_mib=143052, disk_mb=1000, disk=1 GB, disk_mib=954, slurm_account=jlees, runtime=2280, nodes=1, slurm_partition=research
DAG of jobs will be updated after completion.
Job 7 has been submitted with SLURM jobid 53265769 (log: /hps/software/users/jlees/jacqueline/pangenome_merge/snakemake/.snakemake/slurm_logs/rule_split_assemblies_tsv/53265769.log).
Waiting at most 5 seconds for missing files:
/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches (missing locally)
/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/batches.index (missing locally)
MissingOutputException in rule split_assemblies_tsv in file "/hps/software/users/jlees/jacqueline/pangenome_merge/snakemake/Snakefile", line 24:
Job 7  completed successfully, but some output files are missing. Missing files after 5 seconds. This might be due to filesystem latency. If that is the case, consider to increase the wait time with --latency-wait:
/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches (missing locally, parent dir not present)
/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/batches.index (missing locally, parent dir not present)
Shutting down, this might take some time.
Cleaning up SLURM log files older than 10 day(s).
Exiting because a job execution failed. Look below for error messages
[Wed Feb 11 13:30:21 2026]
Error in rule split_assemblies_tsv:
    message: None
    jobid: 7
    input: /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/test_data/assemblies.tsv
    output: /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches, /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/batches.index
    shell:
        
        mkdir -p /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches

        in="/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/test_data/assemblies.tsv"
        outdir="/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches"
        max="10000"

        # split into blocks of samples
        split -l "10000" "/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/test_data/assemblies.tsv" "/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches"/assemblies_batch_
        
        # rename to assemblies_batch_000.tsv, assemblies_batch_001.tsv, etc.
        n=0
        for f in /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/assemblies_batch_*; do
            mv "$f" /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/assemblies_batch_$(printf "%03d.tsv" $n)
            n=$((n+1))
        done

        # create and test index
        for f in /nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/assemblies_batch_*.tsv; do
            bn=$(basename "$f")                 # assemblies_batch_000.tsv
            id=${bn#assemblies_batch_}        # 000.tsv
            id=${id%.tsv}                     # 000
            echo "$id"
        done > "/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/batches.index"

        test -s "/nfs/research/jlees/jacqueline/atb_analyses/species_pangenomes/snakemake_test/results/poppunk/batches/batches.index"

        
        (command exited with non-zero exit code)
Complete log(s): /hps/software/users/jlees/jacqueline/pangenome_merge/snakemake/.snakemake/log/2026-02-11T132901.462291.snakemake.log
WorkflowError:
At least one job did not complete successfully.
